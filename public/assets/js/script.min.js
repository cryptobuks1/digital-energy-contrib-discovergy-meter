$(document).ready((function(){$("[data-bs-hover-animate]").mouseenter((function(){var t=$(this);t.addClass("animated "+t.attr("data-bs-hover-animate"))})).mouseleave((function(){var t=$(this);t.removeClass("animated "+t.attr("data-bs-hover-animate"))}))}));var i,acc=document.getElementsByClassName("faq");for(i=0;i<acc.length;i++)acc[i].addEventListener("click",(function(){this.classList.toggle("on");var t=this.nextElementSibling;t.style.maxHeight?t.style.maxHeight=null:t.style.maxHeight=t.scrollHeight+"px"}));Chart.pluginService.register({beforeDraw:function(t){if(t.config.options.elements.center){var i=t.chart.ctx,e=t.config.options.elements.center,a=e.fontStyle||"Arial",n=e.text,s=e.color||"#000",m=e.maxFontSize||75,o=(e.sidePadding||20)/100*(2*t.innerRadius);i.font="30px "+a;var l=i.measureText(n).width,r=2*t.innerRadius-o,g=r/l,c=Math.floor(30*g),d=2*t.innerRadius,u=Math.min(c,d,m),h=e.minFontSize,D=e.lineHeight||25,F=!1;void 0===h&&(h=20),h&&u<h&&(u=h,F=!0),i.textAlign="center",i.textBaseline="middle";var S=(t.chartArea.left+t.chartArea.right)/2,x=(t.chartArea.top+t.chartArea.bottom)/2;if(i.font=u+"px "+a,i.fillStyle=s,!F)return void i.fillText(n,S,x);for(var p=n.split(" "),y="",b=[],f=0;f<p.length;f++){var $=y+p[f]+" ";i.measureText($).width>r&&f>0?(b.push(y),y=p[f]+" "):y=$}x-=b.length/2*D;for(f=0;f<b.length;f++)i.fillText(b[f],S,x),x+=D;i.fillText(y,S,x)}}}),$(document).ready((function(){let t=!0,i="last24h";void 0!==$.getUrlVar("s")&&(i=$.getUrlVar("s"),"last24h"==i&&$("#selectorLabel").html("Die letzten 24 Stunden"),"last7d"==i&&$("#selectorLabel").html("Die letzten 7 Tage"),"last30d"==i&&$("#selectorLabel").html("Die letzten 30 Tage"),"last365d"==i&&$("#selectorLabel").html("Die letzten 365 Tage"));const e=function(){$.getJSON("/msg",(function(e){$("#energyPrice_kwh").html((100*e.stats[i].energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#last24h").html((100*e.stats.last24h.energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#last7d").html((100*e.stats.last7d.energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#last30d").html((100*e.stats.last30d.energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#last365d").html((100*e.stats.last365d.energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$(".updateTS").html(new Date(e.time).toLocaleString()),$("#e24h").html(e.stats.last24h.energyRevenue.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#e7d").html(e.stats.last7d.energyRevenue.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#e30d").html(e.stats.last30d.energyRevenue.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#e365d").html(e.stats.last365d.energyRevenue.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#a24h").html(e.stats.last24h.energySpendings.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#a7d").html(e.stats.last7d.energySpendings.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#a30d").html(e.stats.last30d.energySpendings.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#a365d").html(e.stats.last365d.energySpendings.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#incomeSaldo").html((-1*e.stats[i].incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#s24h").html((-1*e.stats.last24h.incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#s7d").html((-1*e.stats.last7d.incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#s30d").html((-1*e.stats.last30d.incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),$("#s365d").html((-1*e.stats.last365d.incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})),document.title=(100*e.stats[i].energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})+"/kWh "+(-1*e.stats[i].incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})+"/Tag";let a=$("#einnahmenChart"),n=[],s=[];n.push(e.stats[i].energySavingsSelf),s.push("Eigenstrom"),n.push(e.stats[i].energyIncome),s.push("Einspeisung"),n.push(e.stats[i].correntlyIncome),s.push("Corrently Erzeugung");new Chart(a,{type:"doughnut",data:{datasets:[{label:"Einnahmen Verteilung",data:n,backgroundColor:["#006c32","#318b4e","#86df9b"]}],labels:s},options:{responsive:!0,legend:{position:"right"},plugins:{datalabels:{display:!0}},title:{display:!1,text:""},animation:{animateScale:t,animateRotate:t},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,i){return s[t.index]+": "+i.datasets[0].data[t.index]+"€"}}},elements:{center:{text:e.stats[i].energyRevenue.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),color:"#006C32",fontStyle:"Arial",sidePadding:20,minFontSize:20,lineHeight:25}}}});let m=$("#ausgabenChart"),o=[],l=[];o.push(e.stats[i].energyCost),l.push("Strombezug"),o.push(e.stats[i].amortization),l.push("Abschreibung"),o.push(e.stats[i].baseCosts),l.push("Grundgebühr");new Chart(m,{type:"doughnut",data:{datasets:[{label:"Ausgaben Verteilung",data:o,backgroundColor:["#FFA700","#FF8922","#FFF6E4"]}],labels:l},options:{responsive:!0,legend:{position:"left"},plugins:{datalabels:{display:!0}},title:{display:!1,text:""},animation:{animateScale:t,animateRotate:t},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,i){return l[t.index]+": "+i.datasets[0].data[t.index]+"€"}}},elements:{center:{text:e.stats[i].energySpendings.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),color:"#FFA700",fontStyle:"Arial",sidePadding:20,minFontSize:20,lineHeight:25}}}});t=!1}))};setInterval(e,1e4),e()}));