$(document).ready((function(){let t=!0;const i=function(){if(void 0!==window.localStorage.getItem("msg")&&null!==window.localStorage.getItem("msg")){let i=JSON.parse(window.localStorage.getItem("msg"));if(document.title=(100*i.stats.last24h.energyPrice_kwh).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})+"/kWh "+(-1*i.stats.last24h.incomeSaldo).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})+"/Tag",void 0===i.community)return;let e=$("#communityChart"),m=["24 Stunden","7 Tage","30 Tage","365 Tage"];new Chart(e,{type:"radar",data:{datasets:[{label:"Minimum",data:[i.community.last24h.energyPrice_kwh.min,i.community.last7d.energyPrice_kwh.min,i.community.last30d.energyPrice_kwh.min,i.community.last365d.energyPrice_kwh.min],backgroundColor:"rgba(237,166,69,1)"},{label:"Ich",data:[i.community.last24h.energyPrice_kwh.me,i.community.last7d.energyPrice_kwh.me,i.community.last30d.energyPrice_kwh.me,i.community.last365d.energyPrice_kwh.me],backgroundColor:"rgba(20,109,59.1)"},{label:"Maximum",data:[i.community.last24h.energyPrice_kwh.max,i.community.last7d.energyPrice_kwh.max,i.community.last30d.energyPrice_kwh.max,i.community.last365d.energyPrice_kwh.max],backgroundColor:"rgba(192,192,192,1)"}],labels:m},options:{responsive:!0,legend:{position:"top"},plugins:{datalabels:{display:!0,color:"#000000",formatter:function(t,i){return""+t.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})}}},title:{display:!1,text:""},animation:{animateScale:t,animateRotate:t},tooltips:{enabled:!0,mode:"nearest",callbacks:{label:function(t,i){let e="Maximum";return 0==t.datasetIndex&&(e="Minimum"),1==t.datasetIndex&&(e="Ich"),e+":"+i.datasets[t.datasetIndex].data[t.index]+" â‚¬/kWh"}}},elements:{}}});t&&setTimeout((function(){$("#info").addClass("show")}),2e3);let a=i.stats.last24h.consumption_wh*i.meterinfo.energyPriceWh+i.stats.last24h.baseCosts,n=(Math.round(1e4*(1- -1*i.stats.last24h.incomeSaldo/a)),"");n+='<tr class="table-success" data-order=0><td>Ich</td>',n+='<td data-order="'+i.community.last24h.energyPrice_kwh.me+'">'+i.community.last24h.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last7d.energyPrice_kwh.me+'">'+i.community.last7d.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last30d.energyPrice_kwh.me+'">'+i.community.last30d.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last365d.energyPrice_kwh.me+'">'+i.community.last365d.energyPrice_kwh.me.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+="</tr>",n+="<tr><td data-order=1>Minimum</td>",n+='<td data-order="'+i.community.last24h.energyPrice_kwh.min+'">'+i.community.last24h.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last7d.energyPrice_kwh.min+'">'+i.community.last7d.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last30d.energyPrice_kwh.min+'">'+i.community.last30d.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last365d.energyPrice_kwh.min+'">'+i.community.last365d.energyPrice_kwh.min.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+="</tr>",n+="<tr><td data-order=2>Durschschnitt</td>",n+='<td data-order="'+i.community.last24h.energyPrice_kwh.avg+'">'+i.community.last24h.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last7d.energyPrice_kwh.avg+'">'+i.community.last7d.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last30d.energyPrice_kwh.avg+'">'+i.community.last30d.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last365d.energyPrice_kwh.avg+'">'+i.community.last365d.energyPrice_kwh.avg.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+="</tr>",n+="<tr><td data-order=3>Maximum</td>",n+='<td data-order="'+i.community.last24h.energyPrice_kwh.max+'">'+i.community.last24h.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last7d.energyPrice_kwh.max+'">'+i.community.last7d.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last30d.energyPrice_kwh.max+'">'+i.community.last30d.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+='<td data-order="'+i.community.last365d.energyPrice_kwh.max+'">'+i.community.last365d.energyPrice_kwh.max.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:4})+"</td>",n+="</tr>",$("#ctable").html(n),t&&$("table").DataTable({searching:!1,paging:!1,info:!1}),t=!1}},e=function(){$.getJSON("/msg",(function(t){window.localStorage.setItem("msg",JSON.stringify(t)),i()}))};i(),setInterval(e,12e4),e()}));